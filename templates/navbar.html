{% load static %}
<header class="header header--loggedIn" style="padding: 10px 0; background-color: #333;">
    <div class="container" style="display: flex; justify-content: space-between; align-items: center;">

        <!-- Far Left: Back Arrow -->
        <button onclick="history.back()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer; margin-right: 15px;">
            ←
        </button>

        <!-- Left: Logo -->
        <a href="{% url 'home' %}" class="header__logo" style="display: flex; align-items: center; text-decoration: none; color: white;">
            <img src="{% static 'images/logo.svg' %}" alt="Logo" style="height: 40px; margin-right: 10px;" />
            <h1 style="font-size: 24px; margin: 0;">The Contractor</h1>
        </a>

        <!-- Center: Navigation Tabs -->
        <div class="navbar-tabs" style="display: flex; justify-content: center; gap: 60px;">
            <a href="{% url 'jobs' %}" style="text-decoration: none; font-weight: bold;">Jobs</a>
            <a href="{% url 'my-jobs-reviews' %}" style="text-decoration: none; font-weight: bold;">My Jobs and Reviews</a>
        </div>

        <!-- Right: User/Login Section -->
        <nav class="header__menu" style="display: flex; align-items: center; position: relative;">
            {% if request.user.is_authenticated %}
                <div class="header__user" style="display: flex; align-items: center; gap: 10px;">
                    <a href="{% url 'user-profile' request.user.id %}" style="display: flex; align-items: center; text-decoration: none; color: white;">
                        <div class="avatar avatar--medium active" style="height: 40px; width: 40px; border-radius: 50%; overflow: hidden;">
                            <img src="{{ request.user.avatar.url }}" alt="User Avatar" style="height: 100%; width: 100%; object-fit: cover;" />
                        </div>
                        <p style="margin: 0;">{{ request.user.username }} <span style="font-size: 12px; color: #ddd;">@{{ request.user.username }}</span></p>
                    </a>
                    <!-- Toggle dropdown button -->
                    <button class="dropdown-button" style="background: none; border: none; cursor: pointer; color: white;">
                        ▼
                    </button>
                </div>
                <!-- Dropdown Menu -->
                <div class="dropdown-menu" style="position: absolute; top: 100%; right: 0; background-color: #444; padding: 10px; border-radius: 4px; display: none; flex-direction: column;">
                    <a href="{% url 'update-user' %}" class="dropdown-link" style="color: white; text-decoration: none; margin-bottom: 5px;">Settings</a>
                    <a href="{% url 'logout' %}" class="dropdown-link" style="color: white; text-decoration: none;">Logout</a>
                </div>
                <script>
                    // Simple dropdown toggle
                    document.addEventListener('DOMContentLoaded', function() {
                        const button = document.querySelector('.dropdown-button');
                        const menu = document.querySelector('.dropdown-menu');
                        button.addEventListener('click', function() {
                            if (menu.style.display === 'flex') {
                                menu.style.display = 'none';
                            } else {
                                menu.style.display = 'flex';
                            }
                        });
                    });
                </script>
            {% else %}
                <a href="{% url 'login' %}" style="display: flex; align-items: center; text-decoration: none; color: white;">
                    <img src="{% static 'images/avatar.svg' %}" alt="Login Avatar" style="height: 40px; width: 40px; margin-right: 5px;" />
                    <p style="margin: 0;">Login</p>
                </a>
            {% endif %}
        </nav>

    </div>
</header>
<!-- {% if request.user.is_authenticated %}
<p>Hello {{request.user}}</p>
<a href="{% url 'logout' %}">Logout</a>
{% else %}
<a href="{% url 'login' %}">Login</a>
{% endif %} -->
